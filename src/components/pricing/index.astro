---
import Layout from "@layouts/Layout.astro";
import Container from "@components/container.astro";
import Sectionhead from "@components/sectionhead.astro";
import PricingComponent from "@components/pricing.astro";
import Faq from "@components/faq.astro";
import ComparePricing from "@components/compare-pricing.astro";
import PricingLink from "@components/ui/pricingLink.astro";

import {
  getLangFromUrl,
  useTranslations,
} from "../../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const pricingPageList = t("pricingpage.pricing");
const pricing = Array.isArray(pricingPageList)
  ? pricingPageList // If already an array, just use it
  : Object.values(pricingPageList);

// const pricing = [
//   {
//     name: "Free",
//     price: "Free",
//     desc: "",
//     color: "blue",
//     popular: false,
//     features: [
//       "1 team",
//       "500MB free storage",
//       "3 active projects",
//       "Unlimited team members",
//       "Task list",
//       "Kanban board",
//       "Project roadmap",
//       "Project insights",
//       "Time tracking",
//     ],
//     button: {
//       text: "Get Started",
//       link: "https://app.worklenz.com/auth/signup",
//     },
//   },
//   {
//     name: "Pro",
//     price: "5.99",
//     desc: "",
//     popular: true,
//     color: "orange",
//     features: [
//       "Unlimited teams",
//       "25GB free storage",
//       "Unlimited active projects",
//       "Unlimited team members",
//       "Everything in free plan",
//       "Resource management",
//       "Advanced project reporting",
//       "Track team members' progress",
//       "Reports exporting",
//     ],
//     button: {
//       text: "Get Started",
//       link: "https://app.worklenz.com/auth/signup",
//     },
//   },
// ];
---

<Layout title="Flexible Pricing Plans to Fit Your Teamâ€™s Needs">
  <Container>
    <Sectionhead>
      <Fragment slot="title">{t("pricingpage.title")}</Fragment>
      <Fragment slot="desc">
        {t("pricingpage.desc")}
      </Fragment>
    </Sectionhead>

    <div class="flex flex-row mx-auto w-[400px] mt-12">
      <PricingLink href="/pricing" block size="md">{t("pricingpage.link.text1")}</PricingLink>
      <PricingLink href="/self-hosted" style="muted" size="md" block>{t("pricingpage.link.text2")}</PricingLink>
    </div>

    <div class="grid md:grid-cols-2 gap-10 mx-auto max-w-screen-md mt-12">
      {pricing.map((item) => <PricingComponent plan={item} />)}
    </div>
    <ComparePricing />
    <Faq />
  </Container>
</Layout>
