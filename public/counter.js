function animateCounter(e,t,n,i){console.log("Animating counter:",e);let o=null,r=l=>{o||(o=l);let s=Math.min((l-o)/i,1),a=Math.floor(s*(n-t)+t);a>=1e3&&(a=(a/1e3).toFixed(1)+"K"),e.textContent=`+${a}`,s<1&&window.requestAnimationFrame(r)};window.requestAnimationFrame(r)}function initCounters(){console.log("Initializing counters...");let e=document.querySelectorAll(".counter");if(0===e.length){console.log("No counters found");return}let t=(e,t)=>{e.forEach(e=>{if(e.isIntersecting){let n=e.target,i=parseInt(n.getAttribute("data-end"),10);console.log("Counter intersecting:",n),animateCounter(n,0,i,2e3),t.unobserve(n)}})};window.counterObserver&&window.counterObserver.disconnect();let n=new IntersectionObserver(t,{root:null,rootMargin:"0px",threshold:.1});e.forEach(e=>n.observe(e)),window.counterObserver=n}function resetCounters(){console.log("Resetting counters...");let e=document.querySelectorAll(".counter");e.forEach(e=>{e.textContent="+0"})}function reinitializeCounters(){console.log("Reinitializing counters..."),resetCounters(),initCounters()}function checkUrlChange(e){let t=location.href;new MutationObserver(()=>{let n=location.href;n!==t&&(t=n,e())}).observe(document,{subtree:!0,childList:!0})}document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded event"),reinitializeCounters()}),window.addEventListener("pageshow",e=>{console.log("Pageshow event",e),reinitializeCounters()}),document.addEventListener("visibilitychange",()=>{console.log("Visibility change event:",document.visibilityState),"visible"===document.visibilityState&&reinitializeCounters()}),window.onpopstate=function(e){console.log("Popstate event",e),reinitializeCounters()},checkUrlChange(()=>{console.log("URL change detected"),reinitializeCounters()});